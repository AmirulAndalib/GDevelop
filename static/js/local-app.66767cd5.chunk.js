(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1248:function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));var n=t(12),o=t.n(n)()("os"),a=function(){try{return o.userInfo().uid}catch(e){return""}}},1253:function(e,r,t){"use strict";t.d(r,"a",(function(){return k}));var n=t(2),o=t(0),a=t.n(o),i=t(12),c=t.n(i),u=t(463),s=t.n(u),l=t(1249),f=t(87),p=t(412),d=t(343),h=t(325),v=t(1254),b=t(347),m=t(34),j=t.n(m),g=c()("electron"),x=g?g.ipcRenderer:null,w=c()("fs-extra"),O=c()("path"),y=function(e,r,t){var n=O.extname(t),o=O.basename(t,n),a=Object(f.a)(o,(function(t){var o=O.join(e,t)+n;return w.existsSync(o)||r.has(o)}));return O.join(e,a)+n},P=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}throw new Error("Not supported");case 2:return e.next=4,j.a.get(r,{responseType:"arraybuffer"});case 4:return n=e.sent,o=n.data,e.next=8,x.invoke("local-file-save-from-arraybuffer",o,t);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),k=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,o,i,c,u,f,m,j,g,k,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.project,o=r.fileMetadata,i=r.onProgress,w&&x){e.next=3;break}throw new Error("Unsupported");case 3:return c=t.getResourcesManager(),u=c.getAllResourceNames().toJSArray(),f=u.filter((function(e){var r=c.getResource(e);return Object(h.h)(r.getFile())})),m=O.dirname(o.fileIdentifier),j=O.join(m,"assets"),g=new Set,k=[],S=0,e.next=13,s.a.withConcurrency(50).for(f).process(function(){var e=Object(n.a)(a.a.mark((function e(r){var t,o,u,s,E,F,D,C;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.getResource(r),o=t.getFile(),!Object(h.e)(o)){e.next=18;break}return e.prev=3,u=Object(h.i)(t),s=u.localFilePath,E=u.extension,F=s?O.resolve(m,s):y(j,g,Object(v.a)(t.getName()+(E||""))),e.next=8,w.ensureDir(j);case 8:return e.next=10,P(o,F);case 10:t.setFile(O.relative(m,F).replace(/\\/g,"/")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),k.push({resourceName:r,error:e.t0});case 16:e.next=29;break;case 18:return D=Object(p.e)(o)?Object(p.b)(o):Object(d.k)(o)?Object(d.b)(o):Object(b.h)(o),C=y(j,g,D),g.add(C),e.prev=21,e.next=24,Object(l.a)({times:2},Object(n.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ensureDir(j);case 2:return e.next=4,x.invoke("local-file-download",o,C);case 4:t.setFile(O.relative(m,C).replace(/\\/g,"/"));case 5:case"end":return e.stop()}}),e)}))));case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(21),k.push({resourceName:r,error:e.t1});case 29:i(S++,f.length);case 30:case"end":return e.stop()}}),e,null,[[3,13],[21,26]])})));return function(r){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",{erroredResources:k});case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},2167:function(e,r,t){"use strict";var n=t(1),o=t(2),a=t(0),i=t.n(a),c=t(1247),u=t(53),s=t(12),l=t.n(s),f=t(325),p=t(485),d=l()("path"),h=l()("fs"),v=l()("electron"),b=v?v.ipcRenderer:null,m=function(){var e=Object(o.a)(i.a.mark((function e(r,t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Not supported.");case 2:return e.next=4,b.invoke("".concat(r,"-load"),t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n,a,c,u,s,l,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.resourceNames,a=d.dirname(t.getProjectFile()),c=[],u=[],s=t.getResourcesManager(),n.forEach((function(e){if(s.hasResource(e)){var r=s.getResource(e).getFile();Object(f.h)(r)?Object(f.e)(r)?console.error("Unsupported blob URL for a resource - ignoring it."):c.push({url:r,resourceName:e}):u.push({localFilePath:r,resourceName:e})}})),e.next=8,Object(p.d)({urlContainers:c,onProgress:function(e,r){}});case 8:return l=e.sent,v=new Map,e.next=12,Promise.all(l.map(function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.error,t=r.blob,n=r.item,!t){e.next=15;break}return e.prev=2,e.t0=v,e.t1=n.resourceName,e.next=7,Object(p.a)(t);case 7:e.t2=e.sent,e.t3={dataUrl:e.t2},e.t0.set.call(e.t0,e.t1,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(2),console.error('Unable to read data from resource "'.concat(n.resourceName,'" - ignoring it.'),e.t4);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(r){return e.apply(this,arguments)}}()));case 12:return e.next=14,Promise.all(u.map(function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.localFilePath,n=r.resourceName,e.prev=1,e.next=4,h.promises.readFile(d.resolve(a,t));case 4:o=e.sent,v.set(n,{localFilePath:t,dataUrl:"data:text/plain;base64,"+o.toString("base64")}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error('Unable to read local file "'.concat(t,'" - ignoring it.'),e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",n.map((function(e){var r=v.get(e);if(!r)return{name:e,dataUrl:""};var t=r.localFilePath;return{name:e,dataUrl:r.dataUrl,localFilePath:t}})));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(r){var t,o,a,s,l,f,p,d,h,v,b,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.externalEditorName,o=r.defaultName,a=r.metadataKey,s=r.resourceKind,l=r.options,f=l.project,p=l.resourceNames,d=l.resourceManagementProps,e.next=4,j({project:f,resourceNames:p});case 4:return h=e.sent,v={singleFrame:l.extraOptions.singleFrame,externalEditorData:Object(c.c)(a,l.extraOptions.existingMetadata),fps:l.extraOptions.fps,isLooping:l.extraOptions.isLooping,name:l.extraOptions.name||p[0]||o,resources:h},Object(u.t)(t),e.next=9,m(t,v);case 9:if(b=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,Object(c.d)({baseNameForNewResources:b.baseNameForNewResources,project:f,resources:b.resources,resourceKind:s});case 14:return g=e.sent,e.prev=15,e.next=18,d.onFetchNewlyAddedResources();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.error("An error happened while fetching the newly added resources:",e.t0);case 23:return Object(c.a)({modifiedResources:g,metadataKey:a,metadata:l.extraOptions.singleFrame?b.externalEditorData:null}),Object(c.b)(g.map((function(e){return e.resource.getName()})),b.externalEditorData),e.abrupt("return",{resources:g.map((function(e){var r=e.resource,t=e.originalIndex;return{name:r.getName(),originalIndex:t}})),newName:b.baseNameForNewResources,newMetadata:Object(n.a)({},a,b.externalEditorData)});case 26:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(r){return e.apply(this,arguments)}}(),x=[{name:"piskel-app",createDisplayName:{id:"Create with Piskel"},editDisplayName:{id:"Edit with Piskel"},kind:"image",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"piskel",defaultName:"New image",metadataKey:"pskl",resourceKind:"image"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{name:"Jfxr",createDisplayName:{id:"Create with Jfxr"},editDisplayName:{id:"Edit with Jfxr"},kind:"audio",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"jfxr",defaultName:"New sound effect",metadataKey:"jfxr",resourceKind:"audio"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{name:"Yarn",createDisplayName:{id:"Create with Yarn"},editDisplayName:{id:"Edit with Yarn"},kind:"json",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"yarn",defaultName:"New dialogue tree",metadataKey:"yarn",resourceKind:"json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}];r.a=x},2168:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return k}));var n=t(6),o=t(5),a=t(9),i=t(10),c=t(11),u=t(17),s=t(420),l=t(12),f=t.n(l),p=t(2169),d=t(400),h=t(2394),v=t(333),b=t.n(v),m=t(750),j=t(2171),g=t(26),x=t(8),w=f()("electron"),O=f()("path"),y=w?w.ipcRenderer:null,P=e.gd,k=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowOptions:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){var r=e.state,t=r.previewGamePath,n=r.previewBrowserWindowOptions;n&&t&&y&&y.invoke("preview-open",{previewBrowserWindowOptions:n,previewGameIndexHtmlPath:"file://".concat(t,"/index.html"),alwaysOnTop:e.state.alwaysOnTop,hideMenuBar:e.state.hideMenuBar})},e.closePreview=function(e){y&&y.invoke("preview-close",{windowId:e})},e._openPreviewWindow=function(r,t,n){e.setState({previewBrowserWindowOptions:{width:r.getGameResolutionWidth(),height:r.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(r.getName()),backgroundColor:"#000000",webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1}},previewGamePath:t,hideMenuBar:!n.getIsMenuBarHiddenInPreview(),alwaysOnTop:n.getIsAlwaysOnTopInPreview()},(function(){if(n.networkPreview){if(!y)return;y.removeAllListeners("serve-folder-done"),y.removeAllListeners("local-network-ips"),y.on("serve-folder-done",(function(r,t,n){t?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:n.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),y.on("local-network-ip",(function(r,t){e.setState({networkPreviewHost:t})})),y.send("serve-folder",{root:t}),y.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(d.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new s.a({downloadUrlsToLocalFiles:!1}),n=b()(new P.AbstractFileSystemJS,t);return{outputDir:O.join(n.getTempDir(),"preview"),exporter:new P.Exporter(n,r),gdjsRoot:r}}))},e.launchPreview=function(r){var t=r.project,n=r.layout,o=r.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter,u=a.gdjsRoot;Object(p.a)((function(){var a=new P.PreviewExportOptions(t,i);a.setIsDevelopmentEnvironment(g.b.isDev()),a.setLayoutName(n.getName()),o&&a.setExternalLayoutName(o.getName());var s=Object(j.a)();s&&a.useWebsocketDebuggerClientWithServerAddress(s.address,""+s.port);var l=e.props.getIncludeFileHashs();for(var f in l){var p=l[f];a.setIncludeFileHash(f,p)}a.setElectronRemoteRequirePath(O.join(u,"../preview_node_modules","@electron/remote","renderer/index.js"));var d=e.getPreviewDebuggerServer().getExistingDebuggerIds(),h=r.hotReload&&!!d.length;a.setProjectDataOnlyExport(h&&r.projectDataOnlyExport),a.setFullLoadingScreen(r.fullLoadingScreen),r.fallbackAuthor&&a.setFallbackAuthor(r.fallbackAuthor.id,r.fallbackAuthor.username),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),h?(d.forEach((function(r){e.getPreviewDebuggerServer().sendMessage(r,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkUserHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(t,i,r)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkUserHasSubscription()},e}return Object(o.a)(t,[{key:"getPreviewDebuggerServer",value:function(){return j.b}},{key:"render",value:function(){var e=this,r=this.state,t=r.networkPreviewDialogOpen,n=r.networkPreviewHost,o=r.networkPreviewPort,a=r.networkPreviewError;return Object(x.jsxs)(u.Fragment,{children:[Object(x.jsx)(m.a,{ref:function(r){return e._networkPreviewSubscriptionChecker=r},onChangeSubscription:function(){return e.setState({networkPreviewDialogOpen:!1})},id:"Preview over wifi",title:Object(x.jsx)(c.Trans,{id:"Preview over wifi"}),mode:"try"}),Object(x.jsx)(m.a,{ref:function(r){return e._hotReloadSubscriptionChecker=r},id:"Hot reloading",title:Object(x.jsx)(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),Object(x.jsx)(h.a,{open:t,url:n&&o?"".concat(n,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow})]})}}]),t}(u.Component)}).call(this,t(40))},2169:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n=function(e,r){var t=performance.now();e(),r(performance.now()-t)}},2171:function(e,r,t){"use strict";t.d(r,"b",(function(){return l})),t.d(r,"a",(function(){return f}));var n=t(12),o=t.n(n)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,u=[],s=[],l={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,r){var t=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-connection-errored"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,n){t||(r(n),t=!0),u.forEach((function(e){return(0,e.onErrorReceived)(n)}))})),a.on("debugger-connection-closed",(function(e,r){var t=r.id,n=s.indexOf(t);-1!==n&&s.splice(n,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:s})}))})),a.on("debugger-connection-opened",(function(e,r){var t=r.id;s.push(t),u.forEach((function(e){return(0,e.onConnectionOpened)({id:t,debuggerIds:s})}))})),a.on("debugger-connection-errored",(function(e,r){var t=r.id,n=r.errorMessage;u.forEach((function(e){return(0,e.onConnectionErrored)({id:t,errorMessage:n})}))})),a.on("debugger-start-server-done",(function(r,n){var o=n.address;console.info("Local preview debugger started"),i="started",c=o,t||(e(),t=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,r){var t=r.id,n=r.message;console.info("Processing message received for debugger");try{var o=JSON.parse(n);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),r=new Promise((function(e,r){setTimeout((function(){r(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,r])},sendMessage:function(e,r){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(r)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var r=u.indexOf(e);-1!==r&&u.splice(r,1)}}},f=function(){return c}},2172:function(e,r,t){"use strict";t.d(r,"c",(function(){return j})),t.d(r,"a",(function(){return g})),t.d(r,"b",(function(){return x}));var n=t(3),o=t(2173),a=t(2174),i=t(2175),c=t(2176),u=t(2178),s=t(2179),l=t(2180),f=t(690),p=t(698),d=t(697),h=t(693),v=t(694),b=t(695),m=t(691),j=Object(n.a)(Object(n.a)({},p.c),{},{exportPipeline:l.a}),g=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},v.b),{},{exportPipeline:u.a}),Object(n.a)(Object(n.a)({},b.b),{},{exportPipeline:s.a}),Object(n.a)(Object(n.a)({},h.c),{},{exportPipeline:c.a})],x=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},f.c),{},{exportPipeline:o.a}),Object(n.a)(Object(n.a)({},m.c),{},{exportPipeline:a.a})]},2173:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(11),c=(t(17),t(274)),u=t(268),s=t(400),l=t(420),f=t(540),p=t(333),d=t.n(p),h=t(12),v=t.n(h),b=t(690),m=t(443),j=t(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(b.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(f.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,(c=new w.ExportOptions(r.project,r.exportState.outputDir)).setTarget("cordova"),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){x&&x.openPath(r.outputDir)});return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(40))},2174:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(11),c=(t(17),t(274)),u=t(268),s=t(400),l=t(420),f=t(540),p=t(333),d=t.n(p),h=t(12),v=t.n(h),b=t(691),m=t(443),j=t(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(b.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(f.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,(c=new w.ExportOptions(r.project,r.exportState.outputDir)).setTarget("electron"),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){x&&x.openPath(r.outputDir)});return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(40))},2175:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(11),c=(t(17),t(274)),u=t(268),s=t(400),l=t(420),f=t(540),p=t(333),d=t.n(p),h=t(12),v=t.n(h),b=t(697),m=t(443),j=t(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(b.b,{})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(f.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=new w.ExportOptions(r.project,r.exportState.outputDir),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 7:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState;e.onClose;return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{fullWidth:!0,primary:!0,onClick:function(){x&&x.openPath(r.outputDir)},label:Object(j.jsx)(i.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,t(40))},2176:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return S}));var n=t(2),o=t(0),a=t.n(o),i=t(11),c=(t(17),t(274)),u=t(268),s=t(400),l=t(420),f=t(333),p=t.n(f),d=t(12),h=t.n(d),v=t(2177),b=t(692),m=t(693),j=t(443),g=t(8),x=h()("path"),w=h()("electron"),O=h()("@electron/remote"),y=O?O.app:null,P=w?w.shell:null,k=e.gd,S={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:y?x.join(y.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},isNavigationDisabled:function(){return!1},renderHeader:function(e){e.project;var r=e.exportState,t=e.updateExportState;return Object(g.jsxs)(u.a,{noMargin:!0,children:[Object(g.jsx)(u.c,{children:Object(g.jsx)(m.b,{})}),Object(g.jsx)(u.c,{children:Object(g.jsx)(v.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:r.archiveOutputFilename,defaultPath:y?y.getPath("documents"):"",onChange:function(e){return t((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(g.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=p()(new k.AbstractFileSystemJS,t),o=new k.Exporter(n,r),a=x.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=t.temporaryOutputDir,(u=new k.ExportOptions(r.project,c)).setTarget("facebookInstantGames"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir;return Object(b.a)({path:t,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){P&&x&&P.openPath(x.dirname(r.archiveOutputFilename))});return Object(g.jsx)(m.a,{renderGameButton:function(){return Object(g.jsx)(c.a,{label:Object(g.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(40))},2177:function(e,r,t){"use strict";var n=t(3),o=t(2),a=t(0),i=t.n(a),c=t(11),u=(t(17),t(291)),s=t(12),l=t.n(s),f=t(272),p=t(8),d=l()("electron"),h=l()("@electron/remote"),v=h?h.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};r.a=function(e){var r=e.value,t=e.onChange,a=e.title,s=e.message,l=e.defaultPath,m=e.fullWidth,j=e.filters,g=function(){var e=Object(o.a)(i.a.mark((function e(){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&d){e.next=2;break}return e.abrupt("return");case 2:return r=h.getCurrentWindow(),e.next=5,v.showSaveDialog(r,{title:a,filters:j,message:s,defaultPath:l});case 5:n=e.sent,o=n.filePath,t(o||"");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{style:Object(n.a)(Object(n.a)({},b.container),{},{width:m?"100%":void 0}),children:[Object(p.jsx)(u.b,{margin:"dense",style:b.textField,type:"text",translatableHintText:{id:"Choose a file"},value:r,onChange:function(e,r){return t(r)}}),Object(p.jsx)(f.a,{label:Object(p.jsx)(c.Trans,{id:"Choose"}),style:b.button,onClick:g})]})}},2178:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return y}));var n=t(2),o=t(3),a=t(0),i=t.n(a),c=t(11),u=(t(17),t(333)),s=t.n(u),l=t(358),f=t(871),p=t(400),d=t(692),h=t(12),v=t.n(h),b=t(420),m=t(694),j=t(443),g=t(8),x=v()("path"),w=v()("os"),O=e.gd,y={name:"local-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,r,t){return r||""===t},isNavigationDisabled:function(e,r){return!r&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(o.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Create package for Android"})},prepareExporter:function(e){return Object(p.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new b.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,t),o=new O.Exporter(n,r),a=x.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(r,t,n){var o,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,a=t.localFileSystem,c=t.temporaryOutputDir,(u=new O.ExportOptions(r.project,c)).setTarget("cordova"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:a.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(r,t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:t,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,r){return Object(l.g)().then((function(t){return Object(f.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(l.a)(a,i.uid,t,e.targets,e.keystore,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(40))},2179:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return y}));var n=t(2),o=t(3),a=t(0),i=t.n(a),c=t(11),u=(t(17),t(333)),s=t.n(u),l=t(358),f=t(400),p=t(871),d=t(692),h=t(12),v=t.n(h),b=t(420),m=t(695),j=t(443),g=t(8),x=v()("path"),w=v()("os"),O=e.gd,y={name:"local-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,r,t){return!!e.targets.length&&(r||""===t)},isNavigationDisabled:function(e,r){return!r&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(o.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Package"})},prepareExporter:function(e){return Object(f.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new b.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,t),o=new O.Exporter(n,r),a=x.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(r,t,n){var o,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,a=t.localFileSystem,c=t.temporaryOutputDir,(u=new O.ExportOptions(r.project,c)).setTarget("electron"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:a.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(r,t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:t,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,r){return Object(l.g)().then((function(t){return Object(p.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(l.b)(a,i.uid,t,e.targets,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(40))},2180:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(11),c=(t(17),t(333)),u=t.n(c),s=t(358),l=t(871),f=t(400),p=t(692),d=t(12),h=t.n(d),v=t(420),b=t(698),m=t(443),j=t(8),g=h()("path"),x=h()("os"),w=e.gd,O={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,r,t){return r||""===t||"done"===t},isNavigationDisabled:function(e,r){return!r&&!["","done"].includes(e)},renderHeader:function(){return Object(j.jsx)(b.a,{})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var r=e.build,t=e.project,n=e.onSaveProject,o=e.errored,a=e.exportStep;return Object(j.jsx)(b.b,{build:r,project:t,onSaveProject:n,errored:o,exportStep:a})},prepareExporter:function(e){return Object(f.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new v.a({downloadUrlsToLocalFiles:!0}),n=u()(new w.AbstractFileSystemJS,t),o=new w.Exporter(n,r),a=g.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=t.temporaryOutputDir,u=new w.ExportOptions(r.project,c),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 7:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(m.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=x.tmpdir();return Object(p.a)({path:t,outputFilename:g.join(n,"game-archive.zip"),sizeLimit:25e7})},launchUpload:function(e,r){return Object(s.g)().then((function(t){return Object(l.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(s.c)(a,i.uid,t,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(40))},2181:function(e,r,t){"use strict";var n=t(25),o=t(17),a=t(12),i=t.n(a),c=t(415),u=t(1241),s=t(41),l=i()("electron"),f=i()("@electron/remote"),p=f?f.app:null,d=l?l.ipcRenderer:null,h=function(e){var r=e.ipcEvent,t=e.callback,n=e.shouldApply;o.useEffect((function(){if(d&&n){var e=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.apply(void 0,n)};return d.on(r,e),function(){return d.removeListener(r,e)}}}),[r,t,n])},v=function(e){var r=e.event,t=e.callback;o.useEffect((function(){if(p){var e=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.apply(void 0,n)};return p.on(r,e),function(){return p.removeListener(r,e)}}}),[r,t])},b=function(e){if(!e)return!1;var r=e.toLowerCase();return r.startsWith("gdevelop")&&"gdevelop dialogue tree editor (yarn)"!==r&&"gdevelop sound effects editor (jfxr)"!==r&&"gdevelop image editor (piskel)"!==r};r.a=function(e){var r=e.props,t=e.callbacks,a=e.extraCallbacks,i=r.i18n,l=r.project,p=r.recentProjectFiles,m=r.shortcutMap,j=a.onClosePreview,g=i.language,x=o.useState(!0),w=Object(n.a)(x,2),O=w[0],y=w[1],P=o.useState(f.getCurrentWindow().id),k=Object(n.a)(P,2),S=k[0],E=k[1],F=!O&&j?function(){return j(S)}:null,D=o.useContext(s.a).values.useShortcutToClosePreviewWindow;v({event:"browser-window-focus",callback:function(e){E(e.id),y(b(e.title))}}),v({event:"browser-window-blur",callback:function(e){y(!b(e.title))}}),h({ipcEvent:"main-menu-open",callback:t.onChooseProject,shouldApply:O}),h({ipcEvent:"main-menu-open-recent",callback:t.onOpenRecentFile,shouldApply:O}),h({ipcEvent:"main-menu-save",callback:t.onSaveProject,shouldApply:O}),h({ipcEvent:"main-menu-save-as",callback:t.onSaveProjectAs,shouldApply:O}),h({ipcEvent:"main-menu-close",callback:D&&F?F:t.onCloseProject,shouldApply:!(!D||!F)||O}),h({ipcEvent:"main-menu-close-app",callback:t.onCloseApp,shouldApply:O}),h({ipcEvent:"main-menu-export",callback:t.onExportProject,shouldApply:O}),h({ipcEvent:"main-menu-create-template",callback:t.onCreateProject,shouldApply:O}),h({ipcEvent:"main-menu-create-blank",callback:t.onCreateBlank,shouldApply:O}),h({ipcEvent:"main-menu-open-project-manager",callback:t.onOpenProjectManager,shouldApply:O}),h({ipcEvent:"main-menu-open-home-page",callback:t.onOpenHomePage,shouldApply:O}),h({ipcEvent:"main-menu-open-debugger",callback:t.onOpenDebugger,shouldApply:O}),h({ipcEvent:"main-menu-open-about",callback:t.onOpenAbout,shouldApply:O}),h({ipcEvent:"main-menu-open-preferences",callback:t.onOpenPreferences,shouldApply:O}),h({ipcEvent:"main-menu-open-language",callback:t.onOpenLanguage,shouldApply:O}),h({ipcEvent:"main-menu-open-profile",callback:t.onOpenProfile,shouldApply:O}),h({ipcEvent:"main-menu-open-games-dashboard",callback:t.onOpenGamesDashboard,shouldApply:O}),h({ipcEvent:"update-status",callback:t.setElectronUpdateStatus,shouldApply:!0}),o.useEffect((function(){d&&d.send("set-main-menu",Object(u.b)({project:l,i18n:i,recentProjectFiles:p,shortcutMap:m,isApplicationTopLevelMenu:!0}))}),[i,g,l,p,m]);var C=t.onOpenRecentFile;return Object(c.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:o.useCallback((function(){return p.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return C(e)}}}))}),[C,p])}),null}},2182:function(e,r,t){var n=t(1250).loadExtension,o=t(12),a=t(2183).findJsExtensionModules;e.exports=function(e){var r=e.gd,t=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return a({filterExamples:c,onFindGDJS:u}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(u){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(t&&c.registerEditorConfigurations&&c.registerEditorConfigurations(t),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:n(e,r,r.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},2183:function(e,r,t){var n=t(400).findGDJS,o=t(12),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var r=e.filterExamples,t=e.onFindGDJS;return(t?t():n()).then((function(e){var t=e.gdjsRoot,n=a.join(t,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(n,"...")),new Promise((function(e,t){i.readdir(n,(function(o,c){if(o)return t(o);var u=c.filter((function(e){return!r||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return r=a.join(n,e),new Promise((function(e){var t=a.join(r,"JsExtension.js");i.stat(t,(function(r,n){return e(r?null:n.isFile()?t:null)}))}));var r}))).then((function(r){e(r.filter((function(e){return!!e})))}),t)}))}))}))}}},2184:function(e,r,t){"use strict";t.d(r,"a",(function(){return f}));var n=t(12),o=t.n(n),a=t(1248),i=t(654),c=t.n(i),u=o()("path"),s=o()("os"),l=o()("fs"),f=function(e){var r=e.onWriteFile,t=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(a.a)());l.mkdir(t,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var n=function(e){return"".concat(t,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return n(e)},writeFunctionCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))},writeObjectCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))}}}},2196:function(e,r,t){"use strict";t.d(r,"a",(function(){return d}));var n=t(5),o=t(6),a=t(305),i=t(12),c=t.n(i),u=c()("fs-extra"),s=c()("path"),l=c()("@electron/remote"),f=l?l.dialog:null,p=function(e,r){if(!u)return Promise.reject(new Error("Filesystem is not supported."));try{var t=JSON.stringify(e,null,2);return u.ensureDir(s.dirname(r)).then((function(){return new Promise((function(e,n){u.writeFile(r,t,(function(r){return r?n(r):e()}))}))}))}catch(n){return Promise.reject(n)}},d=Object(n.a)((function e(){Object(o.a)(this,e)}));d.chooseEventsFunctionExtensionFile=function(e){if(!f)return Promise.reject("Not supported");var r=l.getCurrentWindow();return f.showSaveDialog(r,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:e||"Extension.json"}).then((function(e){var r=e.filePath;return r||null}))},d.writeEventsFunctionsExtension=function(e,r){var t=Object(a.b)(e);return p(t,r).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))},d.chooseCustomObjectFile=function(e){if(!f)return Promise.reject("Not supported");var r=l.getCurrentWindow();return f.showSaveDialog(r,{title:"Export an object of the project",filters:[{name:"GDevelop 5 object configuration",extensions:["gdo"]}],defaultPath:e||"Object"}).then((function(e){var r=e.filePath;return r||null}))},d.writeCustomObject=function(e,r){var t=e.clone().get();t.setTags(""),t.getVariables().clear(),t.getEffects().clear(),t.getAllBehaviorNames().toJSArray().forEach((function(e){return t.removeBehavior(e)}));var n=Object(a.b)(t);return p(n,r).catch((function(e){throw console.error("Unable to write the object:",e),e}))}},2197:function(e,r,t){"use strict";t.d(r,"a",(function(){return l}));var n=t(5),o=t(6),a=t(12),i=t.n(a),c=i()("fs"),u=i()("@electron/remote"),s=u?u.dialog:null,l=Object(n.a)((function e(){Object(o.a)(this,e)}));l.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=u.getCurrentWindow();return s.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var r=e.filePaths;return r&&r.length?r[0]:null}))},l.readEventsFunctionExtensionFile=function(e){return function(e){return c?new Promise((function(r,t){c.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return t(n);try{var a=JSON.parse(o);return r(a)}catch(i){return t(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},2198:function(e,r,t){"use strict";(function(e){t.d(r,"b",(function(){return m})),t.d(r,"c",(function(){return j})),t.d(r,"a",(function(){return g})),t.d(r,"e",(function(){return x})),t.d(r,"d",(function(){return w}));var n=t(19),o=t(2),a=t(0),i=t.n(a),c=t(325),u=t(278),s=t(87),l=t(762),f=t(12),p=t.n(f),d=e.gd,h=Object(l.a)("glob"),v=p()("path"),b=p()("electron"),m=function(e){var r=e.project,t=e.resource,n=Object(c.c)(r,t.getName());b.shell.showItemInFolder(v.resolve(n))},j=function(e){var r=e.project,t=e.resource,n=Object(c.c)(r,t.getName());b.shell.openPath(v.resolve(n))},g=function(e){var r=e.project,t=e.resource,n=Object(c.c)(r,t.getName());b.clipboard.writeText(v.resolve(n))},x=function(){var e=Object(o.a)(i.a.mark((function e(r){var t,o,a,l,f,p,b,m,j,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.project,o=r.extensions,a=r.createResource,l=h()){e.next=4;break}return e.abrupt("return");case 4:return f=t.getResourcesManager(),p=v.dirname(t.getProjectFile()),b=[].concat(Object(n.a)(o),Object(n.a)(o.map((function(e){return e.toUpperCase()})))),e.prev=7,e.next=10,new Promise((function(e,r){l(p+"/**/*.{"+b.join(",")+"}",(function(t,n){t?r(t):e(n)}))}));case 10:m=e.sent,j=new d.VectorString,m.forEach((function(e){return j.push_back(v.relative(p,e))})),g=t.getResourcesManager().findFilesNotInResources(j),j.delete(),Object(u.mapVector)(g,(function(e){var r=Object(s.a)(e,(function(e){return f.hasResource(e)})),n=a();n.setFile(e),n.setName(r),Object(c.a)(t,n),f.addResource(n),n.delete(),console.info('"'.concat(e,'" added to project as resource named "').concat(r,'".'))})),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(7),console.error("Error finding files inside ".concat(p,":"),e.t0),e.abrupt("return");case 22:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(r){return e.apply(this,arguments)}}(),w=function(e){var r=e.project,t=r.getResourcesManager();t.getAllResourceNames().toJSArray().filter((function(e){return"error"===Object(c.d)(r,e)})).forEach((function(e){t.removeResource(e),console.info("Removed due to invalid path: "+e)}))}}).call(this,t(40))},2199:function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));var n=t(17),o=t(12),a=t.n(o),i=t(41),c=a()("electron"),u=c?c.ipcRenderer:null,s=function(){var e=n.useContext(i.a).values.useGDJSDevelopmentWatcher;return n.useEffect((function(){if(e){if(u)return u.send("setup-local-gdjs-development-watcher"),function(){u.send("close-local-gdjs-development-watcher")};console.error("Unable to find ipcRenderer to set up GDJS development watchers")}}),[e]),null}},2200:function(e,r,t){"use strict";(function(e){var n,o=t(1),a=t(2),i=t(0),c=t.n(i),u=t(876),s=t(1253),l=t(484),f=t(525),p=t(420),d=t(333),h=t.n(d),v=t(12),b=t.n(v),m=t(1255),j=t(432),g=t(347),x=t(2201),w=t(2202),O=t(325),y=b()("path"),P=e.gd,k=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o,i,u,s,l,f,p,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.authenticatedUser,o=r.oldFileMetadata,i=r.newFileMetadata,u=r.onProgress,s={erroredResources:[]},l=i.fileIdentifier,f=t.getResourcesManager(),p=function(e){return f.getAllResourceNames().toJSArray().map((function(e){var r=f.getResource(e),t=r.getFile();return Object(O.h)(t)?Object(j.c)(t)?null:Object(O.e)(t)?(s.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported blob URL.")}),null):null:r})).filter(Boolean)}(),d=y.dirname(o.fileIdentifier),h=0,e.next=10,Object(x.a)(p,{transformItem:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.resolve(d,r.getFile()),e.prev=1,e.next=4,Object(w.a)(t);case 4:return n=e.sent,e.abrupt("return",{resource:r,file:n});case 8:return e.prev=8,e.t0=e.catch(1),s.erroredResources.push({resourceName:r.getName(),error:new Error("Unable to open the file (".concat(t,")."))}),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}(),isChunkTooBig:function(e){return e.length>70||e.filter(Boolean).reduce((function(e,r){return e+r.file.size}),0)>15e7},processChunk:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.filter(Boolean),e.next=3,Object(g.k)(n,l);case 3:return e.next=5,Object(g.r)(n,l,t.map((function(e){return e.file})),(function(e,r){u(h+e,p.length)}));case 5:o=e.sent,h+=r.length,o.forEach((function(e,r){var n=e.url,o=e.error,a=t[r].resource;!o&&n?a.setFile(n):s.erroredResources.push({resourceName:a.getName(),error:o||new Error("Unknown error during upload.")})}));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()});case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),E=(n={},Object(o.a)(n,"".concat(u.a.internalName,"=>").concat(u.a.internalName),function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.newFileMetadata,o=y.dirname(n.fileIdentifier),a=h()(new P.AbstractFileSystemJS,new p.a),P.ProjectResourcesCopier.copyAllResourcesTo(t,a,o,!0,!1,!0),e.abrupt("return",{erroredResources:[]});case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),Object(o.a)(n,"".concat(f.a.internalName,"=>").concat(u.a.internalName),(function(e){var r=e.project,t=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:r,fileMetadata:t,onProgress:n})})),Object(o.a)(n,"".concat(l.a.internalName,"=>").concat(u.a.internalName),(function(e){var r=e.project,t=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:r,fileMetadata:t,onProgress:n})})),Object(o.a)(n,"".concat(u.a.internalName,"=>").concat(f.a.internalName),S),Object(o.a)(n,"".concat(f.a.internalName,"=>").concat(f.a.internalName),m.a),Object(o.a)(n,"".concat(l.a.internalName,"=>").concat(f.a.internalName),k),n),F={moveAllProjectResources:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.oldStorageProvider,n=r.newStorageProvider,o=E["".concat(t.internalName,"=>").concat(n.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(t.internalName," to ").concat(n.internalName,"."));case 4:return e.abrupt("return",o(r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.a=F}).call(this,t(40))},2201:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t(2),o=t(0),a=t.n(o),i=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o,i,c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transformItem,o=t.isChunkTooBig,i=t.processChunk,c=0,u=[];case 3:if(!(c<r.length)){e.next=20;break}return e.next=6,n(r[c]);case 6:if(s=e.sent,u.length){e.next=10;break}e.next=16;break;case 10:if(o([].concat(u,[s]))){e.next=13;break}e.next=16;break;case 13:return e.next=15,i(u);case 15:u.length=0;case 16:u.push(s),c++,e.next=3;break;case 20:if(!u.length){e.next=24;break}return e.next=23,i(u);case 23:u.length=0;case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},2202:function(e,r,t){"use strict";t.d(r,"a",(function(){return p}));var n=t(2),o=t(0),a=t.n(o),i=t(12),c=t.n(i),u=c()("path"),s=c()("fs"),l=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){s.readFile(r,(function(r,n){r?t(r):e(n)}))}));case 2:return t=e.sent,n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f={aac:"audio/aac",wav:"audio/wav",mp3:"audio/mp3",ogg:"audio/ogg",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp",ttf:"font/ttf",otf:"font/otf",mp4:"video/mp4",webm:"video/webm",json:"application/json",xml:"application/xml",gz:"application/gzip",js:"application/javascript"},p=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return t=e.sent,n=u.extname(r).replace(/^\./,""),e.abrupt("return",new File([t],u.basename(r),{type:f[n]||"application/octet-stream"}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},2203:function(e,r,t){"use strict";var n,o=t(2),a=t(1),i=t(0),c=t.n(i),u=t(876),s=t(1253),l=t(484),f=t(525),p=t(1256),d=t(1257),h=(n={},Object(a.a)(n,f.a.internalName,d.a),Object(a.a)(n,u.a.internalName,s.a),Object(a.a)(n,l.a.internalName,p.a),n),v={fetchAllProjectResources:function(){var e=Object(o.a)(c.a.mark((function e(r){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.storageProvider,n=h[t.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(t.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",n(r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.a=v},2394:function(e,r,t){"use strict";var n=t(11),o=t(17),a=t(275),i=t(272),c=t(270),u=t(268),s=t(295),l=t(763),f=t(25),p=t(5),d=t(6),h=null,v=Object(p.a)((function e(){Object(d.a)(this,e)}));v.render=function(e,r){h(e,r)},self.QrCreator=v,function(e){function r(r,t,n,o){var a={},i=e(n,t);i.u(r),i.J(),o=o||0;var c=i.h(),u=i.h()+2*o;return a.text=r,a.level=t,a.version=n,a.O=u,a.a=function(e,r){return r-=o,!(0>(e-=o)||e>=c||0>r||r>=c)&&i.a(e,r)},a}function t(e,r,t,n,o,a,i,c,u,s){function l(r,t,n,o,i,c,u){r?(e.lineTo(t+c,n+u),e.arcTo(t,n,o,i,a)):e.lineTo(t,n)}i?e.moveTo(r+a,t):e.moveTo(r,t),l(c,n,t,n,o,-a,0),l(u,n,o,r,o,0,-a),l(s,r,o,r,t,a,0),l(i,r,t,n,t,0,a)}function n(e,r,t,n,o,a,i,c,u,s){function l(r,t,n,o){e.moveTo(r+n,t),e.lineTo(r,t),e.lineTo(r,t+o),e.arcTo(r,t,r+n,t,a)}i&&l(r,t,a,a),c&&l(n,t,-a,a),u&&l(n,o,-a,-a),s&&l(r,o,a,-a)}function o(e,o){e:{var a=o.text,i=o.v,c=o.N,u=o.K,s=o.P;for(c=Math.max(1,c||1),u=Math.min(40,u||40);c<=u;c+=1)try{var l=r(a,i,c,s);break e}catch(D){}l=void 0}if(!l)return null;for(a=e.getContext("2d"),o.background&&(a.fillStyle=o.background,a.fillRect(o.left,o.top,o.size,o.size)),i=l.O,u=o.size/i,a.beginPath(),s=0;s<i;s+=1)for(c=0;c<i;c+=1){var p=a,d=o.left+c*u,h=o.top+s*u,v=s,b=c,m=l.a,j=d+u,g=h+u,x=v-1,w=v+1,O=b-1,y=b+1,P=Math.floor(Math.min(.5,Math.max(0,o.R))*u),k=m(v,b),S=m(x,O),E=m(x,b);x=m(x,y);var F=m(v,y);y=m(w,y),b=m(w,b),w=m(w,O),v=m(v,O),d=Math.round(d),h=Math.round(h),j=Math.round(j),g=Math.round(g),k?t(p,d,h,j,g,P,!E&&!v,!E&&!F,!b&&!F,!b&&!v):n(p,d,h,j,g,P,E&&v&&S,E&&F&&x,b&&F&&y,b&&v&&w)}return function(e,r){var t=r.fill;if("string"===typeof t)e.fillStyle=t;else{var n=t.type,o=t.colorStops;if(t=t.position.map((function(e){return Math.round(e*r.size)})),"linear-gradient"===n)var a=e.createLinearGradient.apply(e,t);else{if("radial-gradient"!==n)throw Error("Unsupported fill");a=e.createRadialGradient.apply(e,t)}o.forEach((function(e){var r=Object(f.a)(e,2),t=r[0],n=r[1];a.addColorStop(t,n)})),e.fillStyle=a}}(a,o),a.fill(),e}var a={minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:.5,quiet:0};h=function(e,r){var t={};Object.assign(t,a,e),t.N=t.minVersion,t.K=t.maxVersion,t.v=t.ecLevel,t.left=t.left,t.top=t.top,t.size=t.size,t.fill=t.fill,t.background=t.background,t.text=t.text,t.R=t.radius,t.P=t.quiet,r instanceof HTMLCanvasElement?(r.width===t.size&&r.height===t.size||(r.width=t.size,r.height=t.size),r.getContext("2d").clearRect(0,0,r.width,r.height),o(r,t)):((e=document.createElement("canvas")).width=t.size,e.height=t.size,t=o(e,t),r.appendChild(t))}}(function(){function e(o,i){function c(e,r){for(var t=-1;7>=t;t+=1)if(!(-1>=e+t||f<=e+t))for(var n=-1;7>=n;n+=1)-1>=r+n||f<=r+n||(l[e+t][r+n]=0<=t&&6>=t&&(0==n||6==n)||0<=n&&6>=n&&(0==t||6==t)||2<=t&&4>=t&&2<=n&&4>=n)}function u(e,t){for(var i=f=4*o+17,u=Array(i),h=0;h<i;h+=1){u[h]=Array(i);for(var v=0;v<i;v+=1)u[h][v]=null}for(l=u,c(0,0),c(f-7,0),c(0,f-7),i=n.G(o),u=0;u<i.length;u+=1)for(h=0;h<i.length;h+=1){v=i[u];var b=i[h];if(null==l[v][b])for(var m=-2;2>=m;m+=1)for(var j=-2;2>=j;j+=1)l[v+m][b+j]=-2==m||2==m||-2==j||2==j||0==m&&0==j}for(i=8;i<f-8;i+=1)null==l[i][6]&&(l[i][6]=0==i%2);for(i=8;i<f-8;i+=1)null==l[6][i]&&(l[6][i]=0==i%2);for(i=n.w(s<<3|t),u=0;15>u;u+=1)h=!e&&1==(i>>u&1),l[6>u?u:8>u?u+1:f-15+u][8]=h,l[8][8>u?f-u-1:9>u?15-u:14-u]=h;if(l[f-8][8]=!e,7<=o){for(i=n.A(o),u=0;18>u;u+=1)h=!e&&1==(i>>u&1),l[Math.floor(u/3)][u%3+f-8-3]=h;for(u=0;18>u;u+=1)h=!e&&1==(i>>u&1),l[u%3+f-8-3][Math.floor(u/3)]=h}if(null==p){for(e=a.I(o,s),i=function(){var e=[],r=0,t={B:function(){return e},c:function(r){return 1==(e[Math.floor(r/8)]>>>7-r%8&1)},put:function(e,r){for(var n=0;n<r;n+=1)t.m(1==(e>>>r-n-1&1))},f:function(){return r},m:function(t){var n=Math.floor(r/8);e.length<=n&&e.push(0),t&&(e[n]|=128>>>r%8),r+=1}};return t}(),u=0;u<d.length;u+=1)h=d[u],i.put(4,4),i.put(h.b(),n.f(4,o)),h.write(i);for(u=h=0;u<e.length;u+=1)h+=e[u].j;if(i.f()>8*h)throw Error("code length overflow. ("+i.f()+">"+8*h+")");for(i.f()+4<=8*h&&i.put(0,4);0!=i.f()%8;)i.m(!1);for(;!(i.f()>=8*h)&&(i.put(236,8),!(i.f()>=8*h));)i.put(17,8);var g=0;for(h=u=0,v=Array(e.length),b=Array(e.length),m=0;m<e.length;m+=1){var x=e[m].j,w=e[m].o-x;for(u=Math.max(u,x),h=Math.max(h,w),v[m]=Array(x),j=0;j<v[m].length;j+=1)v[m][j]=255&i.B()[j+g];for(g+=x,j=n.C(w),x=r(v[m],j.b()-1).l(j),b[m]=Array(j.b()-1),j=0;j<b[m].length;j+=1)w=j+x.b()-b[m].length,b[m][j]=0<=w?x.c(w):0}for(j=i=0;j<e.length;j+=1)i+=e[j].o;for(i=Array(i),j=g=0;j<u;j+=1)for(m=0;m<e.length;m+=1)j<v[m].length&&(i[g]=v[m][j],g+=1);for(j=0;j<h;j+=1)for(m=0;m<e.length;m+=1)j<b[m].length&&(i[g]=b[m][j],g+=1);p=i}for(e=p,i=-1,u=f-1,h=7,v=0,t=n.F(t),b=f-1;0<b;b-=2)for(6==b&&--b;;){for(m=0;2>m;m+=1)null==l[u][b-m]&&(j=!1,v<e.length&&(j=1==(e[v]>>>h&1)),t(u,b-m)&&(j=!j),l[u][b-m]=j,-1==--h&&(v+=1,h=7));if(0>(u+=i)||f<=u){u-=i,i=-i;break}}}var s=t[i],l=null,f=0,p=null,d=[],h={u:function(r){r=function(r){var t=e.s(r);return{S:function(){return 4},b:function(){return t.length},write:function(e){for(var r=0;r<t.length;r+=1)e.put(t[r],8)}}}(r),d.push(r),p=null},a:function(e,r){if(0>e||f<=e||0>r||f<=r)throw Error(e+","+r);return l[e][r]},h:function(){return f},J:function(){for(var e=0,r=0,t=0;8>t;t+=1){u(!0,t);var o=n.D(h);(0==t||e>o)&&(e=o,r=t)}u(!1,r)}};return h}function r(e,t){if("undefined"==typeof e.length)throw Error(e.length+"/"+t);var n=function(){for(var r=0;r<e.length&&0==e[r];)r+=1;for(var n=Array(e.length-r+t),o=0;o<e.length-r;o+=1)n[o]=e[o+r];return n}(),a={c:function(e){return n[e]},b:function(){return n.length},multiply:function(e){for(var t=Array(a.b()+e.b()-1),n=0;n<a.b();n+=1)for(var i=0;i<e.b();i+=1)t[n+i]^=o.i(o.g(a.c(n))+o.g(e.c(i)));return r(t,0)},l:function(e){if(0>a.b()-e.b())return a;for(var t=o.g(a.c(0))-o.g(e.c(0)),n=Array(a.b()),i=0;i<a.b();i+=1)n[i]=a.c(i);for(i=0;i<e.b();i+=1)n[i]^=o.i(o.g(e.c(i))+t);return r(n,0).l(e)}};return a}e.s=function(e){for(var r=[],t=0;t<e.length;t++){var n=e.charCodeAt(t);128>n?r.push(n):2048>n?r.push(192|n>>6,128|63&n):55296>n||57344<=n?r.push(224|n>>12,128|n>>6&63,128|63&n):(t++,n=65536+((1023&n)<<10|1023&e.charCodeAt(t)),r.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return r};var t={L:1,M:0,Q:3,H:2},n=function(){function e(e){for(var r=0;0!=e;)r+=1,e>>>=1;return r}var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n={w:function(r){for(var t=r<<10;0<=e(t)-e(1335);)t^=1335<<e(t)-e(1335);return 21522^(r<<10|t)},A:function(r){for(var t=r<<12;0<=e(t)-e(7973);)t^=7973<<e(t)-e(7973);return r<<12|t},G:function(e){return t[e-1]},F:function(e){switch(e){case 0:return function(e,r){return 0==(e+r)%2};case 1:return function(e){return 0==e%2};case 2:return function(e,r){return 0==r%3};case 3:return function(e,r){return 0==(e+r)%3};case 4:return function(e,r){return 0==(Math.floor(e/2)+Math.floor(r/3))%2};case 5:return function(e,r){return 0==e*r%2+e*r%3};case 6:return function(e,r){return 0==(e*r%2+e*r%3)%2};case 7:return function(e,r){return 0==(e*r%3+(e+r)%2)%2};default:throw Error("bad maskPattern:"+e)}},C:function(e){for(var t=r([1],0),n=0;n<e;n+=1)t=t.multiply(r([1,o.i(n)],0));return t},f:function(e,r){if(4!=e||1>r||40<r)throw Error("mode: "+e+"; type: "+r);return 10>r?8:16},D:function(e){for(var r=e.h(),t=0,n=0;n<r;n+=1)for(var o=0;o<r;o+=1){for(var a=0,i=e.a(n,o),c=-1;1>=c;c+=1)if(!(0>n+c||r<=n+c))for(var u=-1;1>=u;u+=1)0>o+u||r<=o+u||(0!=c||0!=u)&&i==e.a(n+c,o+u)&&(a+=1);5<a&&(t+=3+a-5)}for(n=0;n<r-1;n+=1)for(o=0;o<r-1;o+=1)a=0,e.a(n,o)&&(a+=1),e.a(n+1,o)&&(a+=1),e.a(n,o+1)&&(a+=1),e.a(n+1,o+1)&&(a+=1),(0==a||4==a)&&(t+=3);for(n=0;n<r;n+=1)for(o=0;o<r-6;o+=1)e.a(n,o)&&!e.a(n,o+1)&&e.a(n,o+2)&&e.a(n,o+3)&&e.a(n,o+4)&&!e.a(n,o+5)&&e.a(n,o+6)&&(t+=40);for(o=0;o<r;o+=1)for(n=0;n<r-6;n+=1)e.a(n,o)&&!e.a(n+1,o)&&e.a(n+2,o)&&e.a(n+3,o)&&e.a(n+4,o)&&!e.a(n+5,o)&&e.a(n+6,o)&&(t+=40);for(o=a=0;o<r;o+=1)for(n=0;n<r;n+=1)e.a(n,o)&&(a+=1);return t+Math.abs(100*a/r/r-50)/5*10}};return n}(),o=function(){for(var e=Array(256),r=Array(256),t=0;8>t;t+=1)e[t]=1<<t;for(t=8;256>t;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;255>t;t+=1)r[e[t]]=t;return{g:function(e){if(1>e)throw Error("glog("+e+")");return r[e]},i:function(r){for(;0>r;)r+=255;for(;256<=r;)r-=255;return e[r]}}}(),a=function(){function e(e,n){switch(n){case t.L:return r[4*(e-1)];case t.M:return r[4*(e-1)+1];case t.Q:return r[4*(e-1)+2];case t.H:return r[4*(e-1)+3]}}var r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n={I:function(r,t){var n=e(r,t);if("undefined"==typeof n)throw Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+t);r=n.length/3,t=[];for(var o=0;o<r;o+=1)for(var a=n[3*o],i=n[3*o+1],c=n[3*o+2],u=0;u<a;u+=1){var s=c,l={};l.o=i,l.j=s,t.push(l)}return t}};return n}();return e}());var b=QrCreator,m=t(277),j=t(8),g=function(e){var r=e.url,t=e.size,n=void 0===t?128:t,a=o.useContext(m.a),i=o.useRef(null);return o.useEffect((function(){var e=i.current;if(e)return b.render({text:r,radius:0,ecLevel:"L",fill:a.palette.secondary,background:null,size:n},e),function(){e.firstChild&&e.removeChild(e.firstChild)}}),[r,n,a]),Object(j.jsx)("div",{ref:i})};r.a=function(e){var r=e.url,t=e.open,o=e.error,f=e.onExport,p=e.onClose,d=e.onRunPreviewLocally;if(!t)return null;var h=r?"http://".concat(r):"";return Object(j.jsxs)(a.c,{title:Object(j.jsx)(n.Trans,{id:"Preview"}),actions:[Object(j.jsx)(i.a,{label:Object(j.jsx)(n.Trans,{id:"Close"}),primary:!0,onClick:p},"close")],secondaryActions:[f&&Object(j.jsx)(i.a,{label:Object(j.jsx)(n.Trans,{id:"Export game"}),onClick:f},"export"),Object(j.jsx)(i.a,{label:Object(j.jsx)(n.Trans,{id:"Run on this computer"}),onClick:d},"run-preview-locally")],open:t,onRequestClose:p,maxWidth:"sm",children:[o&&Object(j.jsx)(u.c,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(n.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."})})}),!o&&!r&&Object(j.jsx)(s.a,{}),!o&&r&&Object(j.jsxs)("div",{children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(n.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"})})}),Object(j.jsx)(l.a,{url:r}),h&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(n.Trans,{id:"Or flash this QR code:"})})}),Object(j.jsx)(u.c,{justifyContent:"center",children:Object(j.jsx)(g,{url:h,size:100})})]}),Object(j.jsx)(u.c,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(n.Trans,{id:"Please note that your device should be connected on the same network as this computer."})})})]})]})}},2396:function(e,r,t){"use strict";var n=t(24),o=t(2),a=t(19),i=t(0),c=t.n(i),u=t(11),s=(t(17),t(481)),l=t(878),f=t(325),p=t(12),d=t.n(p),h=t(26),v=t(25),b=t(87),m=d()("fs"),j=d()("path");function g(e,r){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(c.a.mark((function e(r,t){var o,a,i,u,s,l,f,p,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return");case 2:o=j.dirname(r.getProjectFile()),a=[],i=Object(n.a)(t.values()),e.prev=5,i.s();case 7:if((u=i.n()).done){e.next=31;break}if(s=u.value,l=s.hasAnyEmbeddedResourceOutsideProjectFolder,f=s.embeddedResources,l){e.next=11;break}return e.abrupt("continue",29);case 11:p=Object(n.a)(f.values()),e.prev=12,h=function(){var e=d.value;if(!e.isOutsideProjectFolder)return"continue";var r=j.basename(e.fullPath),t=j.extname(r),n=j.basename(r,t),i=Object(b.a)(n,(function(e){var r=j.join(o,e)+t;return m.existsSync(r)})),c=j.join(o,i+t);e.resourceName=i+t,a.push(m.promises.copyFile(e.fullPath,c))},p.s();case 15:if((d=p.n()).done){e.next=21;break}if("continue"!==h()){e.next=19;break}return e.abrupt("continue",19);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),p.e(e.t0);case 26:return e.prev=26,p.f(),e.finish(26);case 29:e.next=7;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(5),i.e(e.t1);case 36:return e.prev=36,i.f(),e.finish(36);case 39:return e.abrupt("return",Promise.all(a));case 40:case"end":return e.stop()}}),e,null,[[5,33,36,39],[12,23,26,29]])})))).apply(this,arguments)}function w(e,r){var t,o=j.dirname(e.getProjectFile()),a=new Map,i=Object(n.a)(r);try{for(i.s();!(t=i.n()).done;){var c,u=Object(v.a)(t.value,2),l=u[0],f=u[1].embeddedResources,p={},d=Object(n.a)(f.values());try{for(d.s();!(c=d.n()).done;){var h=c.value,b=h.resourceKind,m=h.resourceName,g=h.relPath,x=h.fullPath;m||(m=j.relative(o,x));var w=Object(s.b)(b);w&&(w.setName(m),w.setFile(m),p[g]=m,e.getResourcesManager().addResource(w))}}catch(O){d.e(O)}finally{d.f()}a.set(l,{mapping:p})}}catch(O){i.e(O)}finally{i.f()}return a}function O(e,r){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function e(r,t){var o,a,i,u,s,l,p,d,h,v,b,g,x,w,O,y,P,k,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,m.promises.readFile(t,"utf8");case 4:if(o=e.sent,e.prev=5,!(a=JSON.parse(o))||!a.__header__||"LDtk"!==a.__header__.app){e.next=16;break}i=j.dirname(t),u=new Map,s=!1,l=Object(n.a)(a.defs.tilesets);try{for(l.s();!(p=l.n()).done;)(d=p.value).relPath&&(h=d.relPath,v=j.resolve(i,h),b=!Object(f.g)(r,v),g={resourceKind:"image",relPath:h,fullPath:v,isOutsideProjectFolder:b},u.set(h,g),b&&(s=!0))}catch(c){l.e(c)}finally{l.f()}x=Object(n.a)(a.levels);try{for(x.s();!(w=x.n()).done;)(O=w.value).bgRelPath&&(y=O.bgRelPath,P=j.resolve(i,y),k=!Object(f.g)(r,P),S={resourceKind:"image",relPath:y,fullPath:P,isOutsideProjectFolder:k},u.set(O.bgRelPath,S),k&&(s=!0))}catch(c){x.e(c)}finally{x.f()}return e.abrupt("return",{hasAnyEmbeddedResourceOutsideProjectFolder:s,embeddedResources:u});case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(5),console.error("Unable to read properly the data from file ".concat(t," for use as a tilemap - ignoring any potentially embedded resources.")),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}var P={tilemap:O,json:O},k=t(268),S=t(274),E=t(1246),F=t(8),D=d()("@electron/remote"),C=D?D.dialog:null,R=d()("path"),N=function(e){var r=e.options,t=e.onChooseResources,n=e.createNewResource;return Object(F.jsx)(l.a,{onChoose:function(e){var r=e.url,o=n();o.setFile(r),o.setName(R.basename(r)),o.setOrigin("gdevelop-asset-store",r),t([o])},resourceKind:r.resourceKind})},A=[].concat(Object(a.a)(s.a.map((function(e){var r=e.kind,t=(e.displayName,e.fileExtensions),a=e.createNewResource,i=function(){var e=Object(o.a)(c.a.mark((function e(o){var i,u,s,l,p,d,v,b,m,j,x,O,y,k,S,E,F,N,A,L,T;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.i18n,u=o.getLastUsedPath,s=o.setLastUsedPath,l=o.project,p=o.options,C){e.next=3;break}throw new Error("Electron dialog not supported in this environment.");case 3:return d=["openFile"],p.multiSelection&&d.push("multiSelections"),v=R.dirname(l.getProjectFile()),b=u(l,r)||v,m=D.getCurrentWindow(),e.next=10,C.showOpenDialog(m,{title:i._({id:"Choose a file"}),properties:d,filters:[{name:i._({id:"Supported files"}),extensions:t}],defaultPath:b});case 10:if(j=e.sent,(x=j.filePaths)&&x.length){e.next=14;break}return e.abrupt("return",[]);case 14:if(O=R.parse(x[0]).dir,s(l,r,O),y=x.some((function(e){return!Object(f.g)(l,e)})),k=new Map,!(S=P[r])){e.next=39;break}E=Object(n.a)(x),e.prev=21,E.s();case 23:if((F=E.n()).done){e.next=31;break}return N=F.value,e.next=27,S(l,N);case 27:(A=e.sent)&&(k.set(N,A),A.hasAnyEmbeddedResourceOutsideProjectFolder&&(y=!0));case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),E.e(e.t0);case 36:return e.prev=36,E.f(),e.finish(36);case 39:if(L=new Map,T=new Map,!y){e.next=49;break}if(!h.b.showConfirmDialog(i._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"}))){e.next=49;break}return e.next=46,Object(f.b)(l,x,L);case 46:return x=e.sent,e.next=49,g(l,k);case 49:return T=w(l,k),e.abrupt("return",x.map((function(e){var r=a();r.setFile(R.relative(v,e)),r.setName(R.relative(v,e));var t=L.has(e)?L.get(e):e;if(t){var n=T.get(t);n&&n.mapping&&r.setMetadata(JSON.stringify({embeddedResourcesMapping:n.mapping}))}return r})));case 51:case"end":return e.stop()}}),e,null,[[21,33,36,39]])})));return function(r){return e.apply(this,arguments)}}();return{name:"local-file-opener-"+r,displayName:{id:"Choose a file"},displayTab:"import",onlyForStorageProvider:"LocalFile",kind:r,selectResourcesHeadless:i,renderComponent:function(e){return Object(F.jsx)(k.c,{justifyContent:"center",children:Object(F.jsx)(S.a,{primary:!0,label:e.options.multiSelection?Object(F.jsx)(u.Trans,{id:"Choose one or more files"}):Object(F.jsx)(u.Trans,{id:"Choose a file"}),onClick:Object(o.a)(c.a.mark((function r(){var t;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({i18n:e.i18n,project:e.project,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,getLastUsedPath:e.getLastUsedPath,setLastUsedPath:e.setLastUsedPath,options:e.options});case 2:t=r.sent,e.onChooseResources(t);case 4:case"end":return r.stop()}}),r)})))})})}}}))),Object(a.a)(s.a.map((function(e){var r=e.kind,t=e.createNewResource;return{name:"upload-".concat(r),displayName:{id:"File(s) from your device"},displayTab:"import",onlyForStorageProvider:"Cloud",kind:r,renderComponent:function(e){return Object(F.jsx)(E.a,{createNewResource:t,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,automaticallyOpenInput:!!e.automaticallyOpenIfPossible},"url-chooser-".concat(r))}}}))),Object(a.a)(s.a.map((function(e){var r=e.kind,t=e.createNewResource;return{name:"resource-store-".concat(r),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:r,renderComponent:function(e){return Object(F.jsx)(N,{createNewResource:t,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(r))}}}))));r.a=A},263:function(e,r,t){"use strict";t.r(r),function(e){t.d(r,"create",(function(){return D}));var n=t(3),o=(t(17),t(899)),a=t(26),i=t(1269),c=(t(98),t(154),t(2396)),u=t(2167),s=t(2168),l=t(2172),f=t(2181),p=t(2182),d=t.n(p),h=t(2184),v=t(576),b=t(359),m=t(1263),j=t(2196),g=t(2197),x=t(577),w=t(876),O=t(2199),y=t(525),P=t(484),k=t(2200),S=t(2203),E=t(8),F=e.gd,D=function(e){a.b.setUpContextMenu();var r=a.b.getArguments(),t=a.b.isDev();return Object(E.jsx)(m.a,{authentication:e,disableCheckForUpdates:!!r["disable-update-check"],makeEventsFunctionCodeWriter:h.a,eventsFunctionsExtensionWriter:j.a,eventsFunctionsExtensionOpener:g.a,children:function(e){var a=e.i18n;return Object(E.jsx)(x.a,{appArguments:r,storageProviders:[w.a,P.a,y.a],defaultStorageProvider:w.a,children:function(e){var r=e.getStorageProviderOperations,p=e.getStorageProviderResourceOperations,h=e.storageProviders,m=e.initialFileMetadataToOpen,j=e.getStorageProvider;return Object(E.jsx)(o.a,{i18n:a,renderMainMenu:function(e,r,t){return Object(E.jsx)(f.a,{props:e,callbacks:r,extraCallbacks:t})},renderPreviewLauncher:function(e,r){return Object(E.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:r}))},renderExportDialog:function(e){return Object(E.jsx)(i.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:l.a,manualExporters:l.b,onlineWebExporter:l.c})},renderGDJSDevelopmentWatcher:t?function(){return Object(E.jsx)(O.a,{})}:null,storageProviders:h,resourceMover:k.a,resourceFetcher:S.a,getStorageProviderOperations:r,getStorageProviderResourceOperations:p,getStorageProvider:j,resourceSources:c.a,resourceExternalEditors:u.a,extensionsLoader:d()({gd:F,objectsEditorService:v.a,objectsRenderingService:b.a,filterExamples:!t}),initialFileMetadataToOpen:m})}})}})}}.call(this,t(40))},420:function(e,r,t){"use strict";(function(e){var n=t(5),o=t(6),a=t(12),i=t.n(a),c=t(1248),u=t(325),s=i()("fs-extra"),l=i()("path"),f=i()("os"),p=e.gd,d=l.posix||l,h=Object(n.a)((function e(r){var t=this;Object(o.a)(this,e),this._filesToDownload={},this.getAllUrlFilesIn=function(e){var r=d.normalize(e).replace(/\\/g,"/");return Object.keys(t._filesToDownload).filter((function(e){return 0===e.indexOf(r)})).map((function(e){return{filePath:e,url:t._filesToDownload[e]}}))},this.mkDir=function(e){if(!Object(u.h)(e)){try{s.mkdirsSync(e)}catch(r){return console.error("mkDir("+e+") failed: "+r),!1}return!0}},this.dirExists=function(e){return!!Object(u.h)(e)||s.existsSync(e)},this.clearDir=function(e){try{s.emptyDirSync(e)}catch(r){console.error("clearDir("+e+") failed: "+r)}},this.getTempDir=function(){return l.join(f.tmpdir(),"GDTMP-".concat(Object(c.a)()))},this.fileNameFrom=function(e){return!t._downloadUrlsToLocalFiles&&Object(u.h)(e)?e:l.basename(e)},this.dirNameFrom=function(e){return l.dirname(e).replace(/\\/g,"/")},this.makeAbsolute=function(e,r){return Object(u.h)(e)?e:(t.isAbsolute(r)||(r=l.resolve(r)),l.resolve(r,l.normalize(e)).replace(/\\/g,"/"))},this.makeRelative=function(e,r){return Object(u.h)(e)?e:l.relative(r,l.normalize(e)).replace(/\\/g,"/")},this.isAbsolute=function(e){return!!Object(u.h)(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,r){if(Object(u.h)(e))return!t._downloadUrlsToLocalFiles||(Object(u.h)(r)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(r,").")),!1):(t._filesToDownload[d.normalize(r)]=e,!0));try{e!==r&&s.copySync(e,r)}catch(n){return console.error("copyFile("+e+", "+r+") failed: "+n),!1}return!0},this.writeToFile=function(e,r){try{s.outputFileSync(e,r)}catch(t){return console.error("writeToFile("+e+", ...) failed: "+t),!1}return!0},this.readFile=function(e){try{return s.readFileSync(e).toString()}catch(r){return console.error("readFile("+e+") failed: "+r),""}},this.readDir=function(e,r){r=r.toUpperCase();var t=new p.VectorString;try{s.existsSync(e)&&s.readdirSync(e).forEach((function(n){0!==r.length&&-1===n.toUpperCase().indexOf(r,n.length-r.length)||t.push_back(e+"/"+n)}))}catch(n){console.error("readDir("+e+","+r+") failed: "+n)}return t},this.fileExists=function(e){var r=d.normalize(e);if(!!t._filesToDownload[r])return!0;try{return s.statSync(e).isFile()}catch(n){return!1}},this._downloadUrlsToLocalFiles=!!r&&r.downloadUrlsToLocalFiles}));r.a=h}).call(this,t(40))},692:function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t(12),o=t.n(n),a=t(762),i=o()("fs"),c=Object(a.a)("archiver"),u=function(e){var r=e.path,t=e.outputFilename,n=e.sizeLimit,o=c();return new Promise((function(e,a){if(!i||!o)return a(new Error("Archiver unavailable"));var c=i.createWriteStream(t),u=o("zip",{zlib:{level:9}});c.on("close",(function(){var r=u.pointer();if(console.log("Archive written at ".concat(t,", ").concat(r," total bytes.")),n&&r>n){var o=Math.round(r/1e6);a(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(n/1e6," MB.")))}e(t)})),u.on("error",(function(e){a(e)})),u.pipe(c),u.directory(r,!1),u.finalize()}))}},871:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t(12),o=t.n(n)()("electron"),a=o?o.ipcRenderer:null,i=function(e,r,t){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(n,o){a.on("local-file-upload-progress",(function(e,r,n){t(r,n)})),a.on("local-file-upload-done",(function(e,r){if(r)return o(r);n()})),a.send("local-file-upload",e,r)}))):Promise.reject("No support for local file upload")}},876:function(e,r,t){"use strict";var n=t(2),o=t(0),a=t.n(o),i=t(11),c=t(17),u=t.n(c),s=t(3),l=t(12),f=t.n(l),p=t(1),d=t(87),h=t(654),v=t.n(h),b=function(e,r){var t=r.isReferenceMagicPropertyName,n=r.getReferencePartialObject,o=r.maxUnsplitDepth;return function e(r,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==r&&"object"===typeof r){var i=Object.keys(r);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[t]?e:null}(r[o]);return i?n(i.referenceTo).then((function(t){return r[o]=t,e(r[o],a+1)})):e(r[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},m=function(e){var r={};return function(t,n){var o=t[e];if("string"!==typeof o)throw new Error("Property ".concat(e," is not a string"));r[n]=r[n]||{};var a=Object(d.a)(v()(o),(function(e){return!!r[n][e]}));return r[n][a]=!0,a}},j=f()("fs"),g=f()("path"),x=f()("@electron/remote"),w=x?x.dialog:null,O=function(e){return j?new Promise((function(r,t){j.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return t(n);try{var a=JSON.parse(o);return r(a)}catch(i){return t(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},y=function(){if(!w)return Promise.reject("Not supported");var e=x.getCurrentWindow();return w.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var r=e.filePaths;return r&&r.length?{fileIdentifier:r[0]}:null}))},P=function(e){var r=e.fileIdentifier,t=g.dirname(r);return O(r).then((function(e){return b(e,{getReferencePartialObject:function(e){return O(g.join(t,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},k=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.fileIdentifier,o=n+".autosave",!j.existsSync(o)){e.next=17;break}if(t){e.next=5;break}return e.abrupt("return",!0);case 5:if(e.prev=5,i=j.statSync(o).mtime.getTime(),c=j.statSync(n).mtime.getTime(),!(i>c+5e3)){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.error("Unable to compare *.autosave to project",e.t0),e.abrupt("return",!1);case 16:case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(r,t){return e.apply(this,arguments)}}(),S=function(e){return Promise.resolve(Object(s.a)(Object(s.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},E=t(305),F=t(540),D=t(8),C=f()("fs-extra"),R=f()("path"),N=f()("@electron/remote"),A=N?N.dialog:null,L=function(e,r){var t=performance.now();return new Promise((function(n,o){C.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==r&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-t;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),n()}))}))},T=function(){var e=Object(n.a)(a.a.mark((function e(r,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==r){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,C.ensureDir(R.dirname(t));case 6:return e.next=8,C.writeFile(t,r);case 8:return e.next=10,L(t,r);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),M=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(r,null,2),e.next=3,T(n,t);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),I=function(e,r,t){var n,o=Object(E.b)(e);if(e.isFolderProject()){var a=function(e,r){var t=r.pathSeparator,n=r.getArrayItemReferenceName,o=r.shouldSplit,a=r.isReferenceMagicPropertyName,i=[],c=function(e,r){var t;return i.push({reference:e,object:r}),t={},Object(p.a)(t,a,!0),Object(p.a)(t,"referenceTo",e),t};return function e(r,a,i){if(null!==r&&"object"===typeof r)if(Array.isArray(r))for(var u in r){var s=a+t+"*";if(o(s)){var l=r[u],f=n(l,i),p=i+t+f;r[u]=c(p,l),e(l,s,p)}else{var d=i+t+u;e(r[u],s,d)}}else for(var h in r){var v=a+t+h,b=i+t+h;if(o(v)){var m=r[h];r[h]=c(b,m),e(m,v,b)}else e(r[h],v,b)}}(e,"",""),i}(o,{pathSeparator:"/",getArrayItemReferenceName:m("name"),shouldSplit:(n=new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"]),function(e){return n.has(e)}),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map((function(e){return M(e.object,R.join(t,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return M(o,r).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return M(o,r).catch((function(e){throw console.error("Unable to write the project:",e),e}))},U=function(e,r){var t=r.fileIdentifier,n=Date.now();if(!t)return Promise.reject('Project file is empty, "Save as" should have been called?');var o=Object(s.a)(Object(s.a)({},r),{},{name:e.getName(),gameId:e.getProjectUuid(),lastModifiedDate:n}),a=R.dirname(t);return I(e,t,a).then((function(){return{wasSaved:!0,fileMetadata:o}}))},J=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n,o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.project,t=r.fileMetadata,n=t?t.fileIdentifier:"",o=N.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]},A){e.next=6;break}throw new Error("Unsupported");case 6:if(c=A.showSaveDialogSync(o,i)){e.next=9;break}return e.abrupt("return",{saveAsLocation:null});case 9:return e.abrupt("return",{saveAsLocation:{fileIdentifier:c}});case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=t.fileIdentifier){e.next=5;break}throw new Error("A file path was not chosen before saving as.");case 5:return n.onStartSaving(),i={fileIdentifier:o,name:r.getName(),gameId:r.getProjectUuid(),lastModifiedDate:Date.now()},e.next=9,n.onMoveResources({newFileMetadata:i});case 9:return c=R.dirname(o),r.setProjectFile(o),e.next=13,I(r,o,c);case 13:return e.abrupt("return",{wasSaved:!0,fileMetadata:i});case 14:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),G=function(e,r){var t=r.fileIdentifier+".autosave";return T(Object(E.a)(e),t).catch((function(e){throw console.error("Unable to write ".concat(t,":"),e),e}))},W=function(e){return{id:"An error occurred when saving the project. Please try again by choosing another location."}},B=/\\ | \/ | : | \* | \? | " | < | > | \|/g,z=/\s+/g,H=t(26),K=t(901),V=u.a.memo((function(e){return Object(D.jsx)(K.a,Object(s.a)(Object(s.a)({},e),{},{viewBox:"0 0 16 16",style:{fill:"none"},children:Object(D.jsx)("path",{d:"M5.75 11.25C5.75 11.25 6 14.25 4 15.25H12C10 14.25 10.25 11.25 10.25 11.25M5.75 11.25H13.25C14.3546 11.25 15.25 10.3546 15.25 9.25V2.75C15.25 1.64543 14.3546 0.75 13.25 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V9.25C0.75 10.3546 1.64543 11.25 2.75 11.25H5.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))})),Q=t(2198),Y=t(481);r.a={internalName:"LocalFile",name:{id:"Your computer"},renderIcon:function(e){return Object(D.jsx)(V,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){return e[H.a]&&e[H.a].length?{fileIdentifier:e[H.a][0]}:null},onRenderNewProjectSaveAsLocationChooser:function(e){var r=e.projectName,t=e.saveAsLocation,n=e.setSaveAsLocation,o=e.newProjectsDefaultFolder,a=t?R.dirname(t.fileIdentifier):o||"",i=r?function(e){return(e.length>200?e.substring(0,200):e).replace(B," ").replace(z," ").trim()}(r)+".json":"game.json";return t||n({fileIdentifier:R.join(a,i)}),Object(D.jsx)(F.a,{fullWidth:!0,value:a,onChange:function(e){return n({fileIdentifier:R.join(e,i)})},type:"create-game"})},createOperations:function(){return{onOpenWithPicker:y,onOpen:P,hasAutoSave:k,onSaveProject:U,onChooseSaveProjectAsLocation:J,onSaveProjectAs:_,onAutoSaveProject:G,onGetAutoSave:S,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorization to open it."}},getWriteErrorMessage:W}},createResourceOperations:function(){return function(e){var r=e.project,t=e.resource,o=e.i18n,c=e.updateInterface,u=e.cleanUserSelectionOfResources,s=e.informUser;return[{label:o._({id:"Locate file"}),click:function(){return Object(Q.b)({project:r,resource:t})}},{label:o._({id:"Open file"}),click:function(){return Object(Q.c)({project:r,resource:t})}},{label:o._({id:"Copy file path"}),click:function(){Object(Q.a)({project:r,resource:t}),s({message:Object(D.jsx)(i.Trans,{id:"Resource file path copied to clipboard"})})}},{type:"separator"},{label:o._({id:"Scan in the project folder for..."}),submenu:Y.a.map((function(e){var t=e.displayName,i=e.fileExtensions,u=e.createNewResource;return{label:o._(t),click:function(){var e=Object(n.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.e)({project:r,extensions:i,createResource:u});case 2:c();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))},{label:o._({id:"Remove resources with invalid path"}),click:function(){Object(Q.d)({project:r}),u(),c()}}]}}}}}]);
//# sourceMappingURL=local-app.66767cd5.chunk.js.map